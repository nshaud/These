%% Manuscrit de thèse de Nicolas Audebert
%% https://nicolas.audebert.at
%%
%% Adapté du template LaTeX de :
%% Copyright (C) 2014 Dorian Depriester
%% http://blog.dorian-depriester.fr
%%
%% This file may be distributed and/or modified under the conditions
%% of the LaTeX Project Public License, either version 1.3c of this
%% license or (at your option) any later version. The latest version
%% of this license is in:
%%
%%    http://www.latex-project.org/lppl.txt
%%
%% and version 1.3c or later is part of all distributions of LaTeX
%% version 2006/05/20 or later.
%!TEX root = Manuscrit.tex


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%           Liste des packages         %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\usepackage[utf8]{inputenc}		% LaTeX, comprend les accents !

%% Standalone
\usepackage{standalone}

%% Réglage des fontes et typo
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}		% LaTeX, comprend les accents !
%\usepackage{chapterbib}
%\renewcommand{\bibsection}{\section{Références}}	% Met les références biblio dans un \section (au lieu de \section*)

\usepackage[french]{babel}
\usepackage{lmodern}
\usepackage{ae,aecompl}										% Utilisation des fontes vectorielles modernes
%\usepackage[upright]{fourier}
\usepackage[frenchstyle]{kpfonts}
%\usepackage{mathpazo}
\usepackage[defaultsans]{droidsans}    % Fonte sans serif pour la page de garde
%\usepackage[sfdefault]{AlegreyaSans} % Autre fonte sans serif
\usepackage{csquotes}
\usepackage[babel,kerning,protrusion,expansion]{microtype} % Ajuste finement les espaces
% En outre, les options babel et kerning permettent d'utiliser ':' avec babel en français et cleveref dans les \caption (en théorie ':' est un caractère actif avec babel)
\usepackage{bbding}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Allure générale du document
%\usepackage{enumerate}
%\usepackage{enumitem}
\usepackage[section]{placeins}	% Place un FloatBarrier à chaque nouvelle section
\usepackage{epigraph}
\usepackage[font={small}]{caption}
\usepackage[francais,nohints]{minitoc}	% Mini table des matières, en français
	\setcounter{minitocdepth}{2}	% Mini-toc détaillées (sections/sous-sections)
%\usepackage[notbib]{tocbibind}		% Ajoute les Tables des Matières/Figures/Tableaux à la table des matières
\usepackage[Lenny]{fncychap}		% Jolis en-têtes de chapitre
%% Couleurs
\usepackage[table,dvipsnames]{xcolor}
\ChNameVar{\fontsize{14}{16}\sffamily\bfseries\color{black}}
\ChNumVar{\fontsize{60}{62}\sffamily\color{black}}
\definecolor{mygreen}{HTML}{1C9607}
\ChTitleVar{\Huge\sffamily\color{mygreen}}
\ChTitleAsIs
\usepackage{multicol}
\usepackage[style=numeric,sorting=nyt,natbib=true,refsection=chapter,backend=biber,backref=true]{biblatex}
\AtEveryBibitem{\clearlist{language}} % Enlève la section "language" des références
\DefineBibliographyStrings{french}{in={dans},inseries={dans}} % Français de France

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Maths
\usepackage{amsmath}			% Permet de taper des formules mathématiques
\usepackage{amssymb}			% Permet d'utiliser des symboles mathématiques
\usepackage{amsfonts}			% Permet d'utiliser des polices mathématiques
\usepackage{nicefrac}			% Fractions 'inline'
\usepackage{amsthm} 		       % Théorèmes
\newtheorem{theorem}{Théorème}
\newtheorem{definition}{Définition}
\newcommand{\diff}{\mathrm{d}} % Dérivation

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Tableaux
\usepackage{multirow}			% Permet de combiner plusiueurs ligns
\usepackage{booktabs}			% Jolis tableaux
%\usepackage{colortbl}
\usepackage{tabularx}			% Tableaux avec largeur de colonne automatique
\newcolumntype{Y}{>{\centering\arraybackslash}X} % Colonne de largeur automatique et centrée
\usepackage{diagbox}
\usepackage{etoolbox}
	\appto\TPTnoteSettings{\footnotesize}
\addto\captionsfrench{\def\tablename{{\textsc{Tableau}}}}	% Renome 'table' en 'tableau'

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Eléments graphiques
\usepackage{graphicx}			% Permet l'inclusion d'images
\usepackage{subcaption}
%\usepackage{pdfpages}
%\usepackage{rotating}
\usepackage{pgfplots}
	\usepgfplotslibrary{groupplots}
\usepackage{tikz}
	\usetikzlibrary{backgrounds,automata,3d,calc,patterns}
	\pgfplotsset{width=7cm,compat=1.3}
	\tikzset{every picture/.style={execute at begin picture={
   		\shorthandoff{:;!?};}
	}}
	\pgfplotsset{every linear axis/.append style={
		/pgf/number format/.cd,
		use comma,
		1000 sep={\,},
	}}
\usepackage{eso-pic}
\usepackage{import}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Mise en forme du texte
\usepackage{xspace}
\usepackage{siunitx}
\sisetup{
range-phrase=--,     % Utilise le tiret court pour dire "de... à"
range-units=single,  % Cache l'unité sur la première borne
locale = FR,
inter-unit-product=\ensuremath{\cdot},
detect-all}
\DeclareSIUnit\px{px}
\usepackage{lettrine}
\usepackage{textcomp}
\usepackage{array}
\usepackage{hyphenat}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Packages pour l'aide à l'écriture
\usepackage[french]{todonotes}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Navigation dans le document
\usepackage[pdftex,pdfborder={0 0 0}]{hyperref}	% Créera automatiquement les liens internes au PDF
					% Doit être chargé en dernier (Sauf exceptions ci-dessous)

\hypersetup{colorlinks=true,
			linkcolor=[rgb]{0,0,0.5},
			citecolor=[rgb]{0.5,0,0}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Packages qui doivent être chargés APRES hyperref
\usepackage[top=2.5cm, bottom=2cm, left=3cm, right=2.5cm,
			headheight=15pt]{geometry}
\usepackage{FiraSans}

\usepackage[nonumberofruns]{xassoccnt}

\newcounter{realpage}
\DeclareAssociatedCounters{page}{realpage}
\AtBeginDocument{%
  \stepcounter{realpage}
}

\DeclareTextFontCommand{\textsfsc}{\sffamily}

\usepackage{fancyhdr}			% Entête et pieds de page. Doit être placé APRES geometry
	\pagestyle{fancy}		% Indique que le style de la page sera justement fancy
	\lfoot[\thepage]{} 		% gauche du pied de page
	\cfoot{} 			% milieu du pied de page
	\rfoot[]{\thepage} 		% droite du pied de page
	\fancyhead[RE, LO] {}
	\newcommand\footmarkleft{
		\begin{picture}(0,0)
				\put(5,-27){\color{mygreen}{\vspace{-1cm}\rule{0.06cm}{1.4cm}}}
		\end{picture}
	}
	\newcommand\footmarkright{
		\begin{picture}(0,0)
				\put(-5,-27){\color{mygreen}{\vspace{-1cm}\rule{0.06cm}{1.4cm}}}
				\makeatletter
				\pgfmathparse{\therealpage/2}
				\pgfmathtruncatemacro{\mypage}{\pgfmathresult}
				\pgfmathparse{mod(\mypage,28)}
				\pgfmathtruncatemacro{\mypage}{\pgfmathresult}
				\put(20, -12){\includegraphics[width=1cm]{/home/naudeber/test/earth-\mypage.png}}
				\makeatother
		\end{picture}
	}
	\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
	\fancyfoot[LE,RO]{}
	\fancyhead[LO,RE,LE,RO]{}
	\fancyfoot[LO]{\textsfsc{{\large \textbf{\thepage}}\footmarkleft}}
	\fancyfoot[RE]{\textsfsc{{\footmarkright \large \textbf{\thepage}}}}
	\fancyhead[LO]{{\normalfont\sffamily\bfseries\nouppercase{{\chaptername~\thechapter} \hspace{0.25cm} \color{mygreen}{\leftmark}}}}
	\fancyhead[RE]{{\normalfont\sffamily\bfseries\nouppercase{{\rightmark}}}}

\fancypagestyle{plain}{
\fancyfoot[LE,RO]{}
\fancyhead[LO,RE,LE,RO]{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\fancyfoot[LO]{\textsfsc{{\large \textbf{\thepage}}\footmarkleft}}
\fancyfoot[RE]{\textsfsc{{\footmarkright \large \textbf{\thepage}}}}}

\usepackage{titlesec}
\usepackage{etoolbox}
\makeatletter
\patchcmd{\ttlh@hang}{\parindent\z@}{\parindent\z@\leavevmode}{}{}
\patchcmd{\ttlh@hang}{\noindent}{}{}{}
\makeatother
	% \titleformat{\chapter}[frame]
	%   {\normalfont\huge}
	%   {\chaptertitlename\ \thechapter}{20pt}{\Huge}
	\titleformat{\section}[hang]
	  {\normalfont\sffamily\Large\bfseries\color{mygreen}}
	  {\Large\thesection}{0.3em}{}
	\titleformat{\subsection}[hang]
	  {\normalfont\sffamily\large\bfseries}
	  {\large\thesubsection}{0.3em}{}
	\titleformat{\subsubsection}[hang]
		{\normalfont\sffamily}
		{\thesection}{0.3em}{}

\usepackage[acronym,toc,numberedsection,ucmark]{glossaries}
	\newglossary[nlg]{notation}{not}{ntn}{Notation} % Création d'un type de glossaire 'notation'
	\makeglossaries
	\loadglsentries{Glossaire}			% Utilisation d'un fichier externe pour la définition des entrées (Glossaire.tex)
\makeglossaries
\usepackage[capitalize,french]{cleveref}

\addbibresource{Chapitre1/Self.bib}
\addbibresource{Chapitre1/Historique.bib}
\addbibresource{Chapitre2/Biblio.bib}
\addbibresource{Chapitre3/Biblio.bib}
\addbibresource{Chapitre4/Biblio.bib}
\addbibresource{Chapitre5/Biblio.bib}
\addbibresource{Chapitre6/Biblio.bib}
\addbibresource{Annexes/Datasets.bib}
